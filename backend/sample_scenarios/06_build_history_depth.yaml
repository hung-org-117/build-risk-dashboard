# =============================================================================
# Scenario 6: Percentage of Builds Before (Build History Depth)
# =============================================================================
# Group builds theo số lượng builds trước đó (quartiles)
# Test khả năng predict với repos mới (ít history) vs repos cũ (nhiều history)

scenario:
  name: "build_history_depth_stratified"
  description: "Split by build history depth (percentage of builds before)"
  version: "1.0"

data_source:
  repositories:
    filter_by: "all"
  builds:
    date_range:
      start: "2024-01-01"
      end: "2024-12-31"
    conclusions: ["success", "failure"]
    exclude_bots: true

splitting:
  strategy: "stratified_within_group"
  group_by: "percentage_of_builds_before"  # 4 quartile bins
  config:
    ratios:
      train: 0.70
      val: 0.15
      test: 0.15
    stratify_by: "outcome"

output:
  format: "parquet"
  include_metadata: true
