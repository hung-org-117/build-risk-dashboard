# =============================================================================
# Production Environment Configuration
# Copy this to .env on your production server
# =============================================================================

# =============================================
# Domain & URLs (REQUIRED)
# =============================================
DOMAIN_NAME=your-domain-or-ip
NEXT_PUBLIC_API_URL=http://your-domain-or-ip:8000/api
NEXT_PUBLIC_WS_URL=ws://your-domain-or-ip:8000/api/ws/events
FRONTEND_BASE_URL=http://your-domain-or-ip:3000

# =============================================
# Security (REQUIRED - Generate strong secrets!)
# =============================================
# Generate with: openssl rand -hex 32
SECRET_KEY=your-secret-key-change-in-production

# =============================================
# Database
# =============================================
MONGODB_DB_NAME=buildguard

# =============================================
# RabbitMQ
# =============================================
RABBITMQ_USER=myuser
RABBITMQ_PASS=change-me-strong-password

# =============================================
# GitHub App Configuration (REQUIRED)
# =============================================
GITHUB_APP_ID=
GITHUB_APP_PRIVATE_KEY=
GITHUB_INSTALLATION_ID=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_WEBHOOK_SECRET=
# OAuth callback URL (must match GitHub App settings)
GITHUB_REDIRECT_URI=http://your-domain-or-ip/api/auth/github/callback

# GitHub Organization for RBAC (REQUIRED)
# Only users from this org can access the app
GITHUB_ORGANIZATION=your-github-org

# For Trivy vulnerability DB and rate limiting
GITHUB_TOKEN=
# Comma-separated list of PATs for GitHub API pool
GITHUB_TOKENS=ghp_token1,ghp_token2

# =============================================
# CI Provider Tokens (Optional)
# =============================================
# CIRCLECI_TOKEN=
# TRAVIS_TOKEN=

# =============================================
# SonarQube Configuration
# NOTE: Configure AFTER first deployment!
# 1. Access SonarQube at http://your-domain:9000
# 2. Login with admin/admin, change password
# 3. Generate token: Administration > Security > Users > Tokens
# 4. Create webhook: Administration > Configuration > Webhooks
#    URL: http://backend:8000/api/integrations/webhooks/sonarqube/pipeline
# =============================================
SONAR_DB_PASSWORD=sonar-strong-password
SONAR_TOKEN=
SONAR_DEFAULT_PROJECT_KEY=build-risk
SONAR_WEBHOOK_SECRET=change-me-to-secure-secret

# =============================================
# Email (Gmail API) - Optional
# =============================================
GMAIL_ENABLED=false
GMAIL_SENDER_EMAIL=
GMAIL_CLIENT_ID=
GMAIL_CLIENT_SECRET=
GMAIL_REFRESH_TOKEN=

# =============================================
# Monitoring
# =============================================
GRAFANA_USER=admin
GRAFANA_PASS=change-me-strong-password
GRAFANA_ROOT_URL=http://your-domain-or-ip:3001
NEXT_PUBLIC_GRAFANA_URL=http://your-domain-or-ip:3001

# =============================================
# Workers
# =============================================
CELERY_CONCURRENCY=4

# =============================================
# Container Permissions (run: id -u && id -g)
# =============================================
APP_UID=1000
APP_GID=1000
